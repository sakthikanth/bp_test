'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createFXAASettings;

var _glShader = require('gl-shader');

var _glShader2 = _interopRequireDefault(_glShader);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var VERTEX = require('fs').readFileSync(__dirname + '/../utils/pass-through.glsl', 'utf8');
var FRAGMENT = require('fs').readFileSync(__dirname + '/built.frag', 'utf8');

function render(pass, multipass, input, renderScreen) {
  var resolution = multipass.resolution;
  var shader = pass.shader;

  shader.bind();
  shader.uniforms.uResolution = resolution;
  shader.uniforms.uInput = input.color[0].bind(0);

  renderScreen();
}

function initGL(pass, multipass) {
  pass.shader = (0, _glShader2.default)(multipass.gl, VERTEX, FRAGMENT);
  pass.render = render.bind(null, pass, multipass);
}

function FXAAPass() {
  this.initGL = initGL.bind(null, this);
  this.shader = null;
  this.render = null;
}

function createFXAASettings() {
  return new FXAAPass();
}