!function(t){"use strict";function i(){this.anchor=document.createElement("a")}function o(t,o,n,e,a){var r=function(){};this.canvas=t,this.cropOptions=o,this.successCallback=n||r,this.errorCallback=e||r,this.callbackContext=a||this,this.saverImplementator=window.cordova?new s:new i}function s(){if(!window.canvas2ImagePlugin)throw"You are using cordova. This library requires canvas2ImagePlugin."}i.prototype.save=function(t,i,o,s,n){this.anchor.download=n||"canvas.png",this.anchor.href=t.toDataURL("image/png"),this.anchor.click(),i(t,n)},"object"==typeof exports&&"undefined"!=typeof module?module.exports=o:t.CanvasImageSaver=o,o.prototype={save:function(t,i){var o;return this.cropOptions?(this.cropOptions.xCropOffset=this.cropOptions.xCropOffset||0,this.cropOptions.yCropOffset=this.cropOptions.yCropOffset||0,this.cropOptions.width=this.cropOptions.width||this.canvas.width-this.cropOptions.xCropOffset,this.cropOptions.height=this.cropOptions.height||this.canvas.height-this.cropOptions.yCropOffset,o=document.createElement("canvas"),o.width=this.cropOptions.width,o.height=this.cropOptions.height,o.getContext("2d").drawImage(this.canvas,this.cropOptions.xCropOffset,this.cropOptions.yCropOffset,o.width,o.height,0,0,o.width,o.height)):o=this.canvas,this.saverImplementator.save(o,this.successCallback.bind(this.callbackContext),this.errorCallback.bind(this.callbackContext),t,i)}},s.prototype.save=function(t,i,o,s,n){window.canvas2ImagePlugin.saveImageDataToLibrary(function(o){i(t,o)},function(t){console.error(t),o(t)},t,s,n)}}(this);